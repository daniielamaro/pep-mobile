{"version":3,"sources":["./src/app/page/consulta/criar-consulta/criar-consulta-routing.module.ts","./src/app/page/consulta/criar-consulta/criar-consulta.module.ts","./src/app/page/consulta/criar-consulta/criar-consulta.page.ts","./src/app/page/consulta/criar-consulta/criar-consulta.page.scss","./src/app/page/consulta/criar-consulta/criar-consulta.page.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEG;AAE1D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mEAAiB;KAC7B;CACF,CAAC;IAMW,8BAA8B,SAA9B,8BAA8B;CAAG;AAAjC,8BAA8B;IAJ1C,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,8BAA8B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBF;AACM;AACF;AAEA;AAEoC;AAEvB;AACJ;IAczC,uBAAuB,SAAvB,uBAAuB;CAAG;AAA1B,uBAAuB;IAZnC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,0FAA8B;SAC/B;QACD,YAAY,EAAE,CAAC,mEAAiB,CAAC;QACjC,SAAS,EAAE;YACT,8DAAe;SAChB;KACF,CAAC;GACW,uBAAuB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBc;AACM;AACU;AACP;AACW;AACR;AACR;IAOzC,iBAAiB,SAAjB,iBAAiB;IAW5B,YACU,eAAgC,EACjC,eAAgC,EAChC,eAAgC,EAC/B,UAAsB,EACtB,MAAc,EACd,OAAuB;QALvB,oBAAe,GAAf,eAAe,CAAiB;QACjC,oBAAe,GAAf,eAAe,CAAiB;QAChC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,eAAU,GAAV,UAAU,CAAY;QACtB,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAgB;QAE/B,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACnC,IAAI,GAAG,YAAY,0DAAa,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,sBAAsB,EAAE;gBAC5E,IAAI,CAAC,SAAS,EAAE,CAAC;aACnB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,QAAQ;qGAAI,CAAC;KAAA;IAEb,SAAS;;YACb,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAC3C,IAAI,KAAK,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAC5C,MAAM,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC7C,CAAC;KAAA;IAEK,cAAc;;YAClB,IAAI,CAAC,iBAAiB,EAAE;iBACrB,IAAI,CAAC,GAAS,EAAE,CAAC;gBAChB,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,4BAA4B,EAAE,CAAC;qBACxD,SAAS,CAAC,CAAC,IAAS,EAAE,EAAE;oBACvB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC7B,CAAC,EACD,KAAK,CAAC,EAAE;oBACN,IAAG,KAAK,CAAC,MAAM,IAAI,GAAG,IAAI,KAAK,CAAC,MAAM,IAAI,GAAG,EAAC;wBAC5C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBAC5B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;qBAC/B;yBAAI;wBACH,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BAC1B,OAAO,EAAE,KAAK,CAAC,KAAK;4BACpB,QAAQ,EAAE,IAAI;yBACf,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;4BACd,KAAK,CAAC,OAAO,EAAE,CAAC;wBAClB,CAAC,CAAC,CAAC;qBACJ;gBACH,CAAC,EACD,GAAG,EAAE;oBACH,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC5B,CAAC,CAAC,CAAC;YACT,CAAC,EAAC,CAAC;QACL,CAAC;KAAA;IAEK,cAAc;;YAClB,IAAI,CAAC,iBAAiB,EAAE;iBACrB,IAAI,CAAC,GAAS,EAAE,CAAC;gBAChB,IAAI,OAAO,GAAG;oBACZ,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;oBACxB,cAAc,EAAE,IAAI,CAAC,YAAY;oBACjC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAC9C,OAAO,EAAE,IAAI,CAAC,OAAO;oBACrB,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,WAAW,EAAE,IAAI,CAAC,WAAW;iBAC9B,CAAC;gBAEF,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;gBAC9B,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;gBAC9B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;gBACxB,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;gBAE7B,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;qBACjD,SAAS,CAAC,GAAG,EAAE;oBACd,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,iBAAiB,CAAC,CAAC;gBAC/C,CAAC,EACD,KAAK,CAAC,EAAE;oBACN,IAAG,KAAK,CAAC,MAAM,IAAI,GAAG,IAAI,KAAK,CAAC,MAAM,IAAI,GAAG,EAAC;wBAC5C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBAC5B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;qBAC/B;yBAAI;wBACH,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BAC1B,OAAO,EAAE,KAAK,CAAC,KAAK;4BACpB,QAAQ,EAAE,IAAI;yBACf,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;4BACd,KAAK,CAAC,OAAO,EAAE,CAAC;wBAClB,CAAC,CAAC,CAAC;qBACJ;gBACH,CAAC,EACD,GAAG,EAAE;oBACH,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC5B,CAAC,CAAC,CAAC;YAEP,CAAC,EAAC,CAAC;QACP,CAAC;KAAA;IAEK,iBAAiB;;YACrB,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBACtD,SAAS,EAAE,qEAAW;aACvB,CAAC,CAAC;YACH,OAAO,MAAM,aAAa,CAAC,OAAO,EAAE,CAAC;QACvC,CAAC;KAAA;IAEK,kBAAkB;;YACtB,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBAC1C,IAAI,MAAM,EAAE;oBACV,MAAM,CAAC,OAAO,EAAE,CAAC;iBAClB;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;CAEF;;YA7HQ,8DAAe;YAJf,2DAAe;YAAE,2DAAe;YAGhC,wEAAU;YAJK,mDAAM;YAGrB,gFAAc;;AASV,iBAAiB;IAL7B,wDAAS,CAAC;QACT,QAAQ,EAAE,oBAAoB;QAC9B,mFAAyC;;KAE1C,CAAC;GACW,iBAAiB,CAsH7B;AAtH6B;;;;;;;;;;;;;;;;ACb9B,iEAAe,WAAW,qBAAqB,gBAAgB,iBAAiB,kBAAkB,2BAA2B,wBAAwB,4BAA4B,GAAG,gBAAgB,+BAA+B,GAAG,gBAAgB,kBAAkB,gCAAgC,wBAAwB,GAAG,uBAAuB,kBAAkB,4BAA4B,wBAAwB,GAAG,6CAA6C,+hCAA+hC,E;;;;;;;;;;;;;;;ACA/+C,iEAAe,4EAA4E,oYAAoY,WAAW,wwBAAwwB,+QAA+Q,2YAA2Y,E","file":"src_app_page_consulta_criar-consulta_criar-consulta_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CriarConsultaPage } from './criar-consulta.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CriarConsultaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CriarConsultaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CriarConsultaPageRoutingModule } from './criar-consulta-routing.module';\n\nimport { CriarConsultaPage } from './criar-consulta.page';\nimport { ConsultaService } from '../consulta.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CriarConsultaPageRoutingModule\n  ],\n  declarations: [CriarConsultaPage],\n  providers: [\n    ConsultaService\n  ]\n})\nexport class CriarConsultaPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { ModalController, ToastController } from '@ionic/angular';\nimport { LoadingPage } from 'src/app/loading/loading.page';\nimport { StorageService } from 'src/app/shared/class/storage.service';\nimport { UrlService } from 'src/app/shared/class/url-service';\nimport { ConsultaService } from '../consulta.service';\n\n@Component({\n  selector: 'app-criar-consulta',\n  templateUrl: './criar-consulta.page.html',\n  styleUrls: ['./criar-consulta.page.scss'],\n})\nexport class CriarConsultaPage implements OnInit {\n\n  tiposConsultas: any;\n  user: any;\n\n  dataConsulta: any;\n  tipoConsulta: any;\n  publico: any;\n  resumo: any;\n  observacoes: any;\n\n  constructor(\n    private consultaService: ConsultaService,\n    public modalController: ModalController,\n    public toastController: ToastController,\n    private urlService: UrlService,\n    private router: Router,\n    private storage: StorageService)\n  {\n    this.router.events.subscribe((evt) => {\n      if (evt instanceof NavigationEnd && this.router.url == \"/page/criar-consulta\") {\n         this.pageEnter();\n      }\n    });\n  }\n\n  async ngOnInit() {}\n\n  async pageEnter(){\n    this.getTiposExames();\n    this.user = await this.storage.get(\"user\");\n    let token = await this.storage.get(\"token\");\n    await this.urlService.validateToken(token);\n  }\n\n  async getTiposExames(){\n    this.showLoadingScreen()\n      .then(async () => {\n        (await this.consultaService.consultarListaTiposConsultas())\n          .subscribe((resp: any) => {\n            this.tiposConsultas = resp;\n          },\n          error => {\n            if(error.status == 401 || error.status == 403){\n              this.storage.remove(\"user\");\n              this.router.navigateByUrl(\"\");\n            }else{\n              this.toastController.create({\n                message: error.error,\n                duration: 5000\n              }).then(toast => {\n                toast.present();\n              });\n            }\n          },\n          () => {\n            this.closeLoadingScreen();\n          });\n    });\n  }\n\n  async salvarConsulta(){\n    this.showLoadingScreen()\n      .then(async () => {\n        let request = {\n          idPaciente: this.user.id,\n          idTipoConsulta: this.tipoConsulta,\n          diaRealizacao: this.dataConsulta.split(\"T\")[0],\n          publico: this.publico,\n          resumo: this.resumo,\n          observacoes: this.observacoes\n        };\n\n        this.dataConsulta = undefined;\n        this.tipoConsulta = undefined;\n        this.publico = false;\n        this.resumo = undefined;\n        this.observacoes = undefined;\n\n        (await this.consultaService.salvarConsulta(request))\n          .subscribe(() => {\n            this.router.navigateByUrl(\"/page/consultas\");\n          },\n          error => {\n            if(error.status == 401 || error.status == 403){\n              this.storage.remove(\"user\");\n              this.router.navigateByUrl(\"\");\n            }else{\n              this.toastController.create({\n                message: error.error,\n                duration: 5000\n              }).then(toast => {\n                toast.present();\n              });\n            }\n          },\n          () => {\n            this.closeLoadingScreen();\n          });\n\n      });\n  }\n\n  async showLoadingScreen() {\n    const loadingScreen = await this.modalController.create({\n      component: LoadingPage\n    });\n    return await loadingScreen.present();\n  }\n\n  async closeLoadingScreen() {\n    this.modalController.getTop().then(loader => {\n      if (loader) {\n        loader.dismiss();\n      }\n    });\n  }\n\n}\n","export default \".content {\\n  margin-top: 13vh;\\n  width: 100%;\\n  height: 77vh;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.listaTipo {\\n  --placeholder-opacity: 0.5;\\n}\\n\\n.item-form {\\n  display: flex;\\n  justify-content: flex-start;\\n  align-items: center;\\n}\\n\\n.item-form-center {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyaWFyLWNvbnN1bHRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FBREY7O0FBSUE7RUFDRSwwQkFBQTtBQURGOztBQUlBO0VBQ0UsYUFBQTtFQUNBLDJCQUFBO0VBQ0EsbUJBQUE7QUFERjs7QUFJQTtFQUNFLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBREYiLCJmaWxlIjoiY3JpYXItY29uc3VsdGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4uY29udGVudHtcclxuICBtYXJnaW4tdG9wOiAxM3ZoO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogNzd2aDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG5cclxuLmxpc3RhVGlwb3tcclxuICAtLXBsYWNlaG9sZGVyLW9wYWNpdHk6IDAuNTtcclxufVxyXG5cclxuLml0ZW0tZm9ybXtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uaXRlbS1mb3JtLWNlbnRlcntcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuIl19 */\";","export default \"<ion-content>\\n  <div class=\\\"content\\\">\\n    <ion-grid style=\\\"width: 90%;\\\">\\n      <ion-row>\\n        <ion-col class=\\\"item-form\\\" size=\\\"12\\\">\\n          <ion-label color=\\\"primary\\\">Especialidade: </ion-label>\\n          <ion-select *ngIf=\\\"tiposConsultas && tiposConsultas.length > 0\\\" [(ngModel)]=\\\"tipoConsulta\\\" class=\\\"listaTipo\\\" placeholder=\\\"Selecione...\\\">\\n            <ion-select-option *ngFor=\\\"let tipo of tiposConsultas\\\" [value]=\\\"tipo.id\\\">{{tipo.nome}}</ion-select-option>\\n          </ion-select>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col class=\\\"item-form\\\" size=\\\"12\\\">\\n          <ion-label color=\\\"primary\\\">Data da Consulta: </ion-label>\\n          <ion-datetime displayFormat=\\\"DD / MMM / YYYY\\\" [(ngModel)]=\\\"dataConsulta\\\" placeholder=\\\"Selecione...\\\"></ion-datetime>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col class=\\\"item-form\\\" size=\\\"12\\\">\\n          <ion-label color=\\\"primary\\\">Publico:</ion-label>\\n          <ion-toggle [(ngModel)]=\\\"publico\\\"></ion-toggle>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col class=\\\"item-form\\\" size=\\\"12\\\">\\n          <ion-textarea [(ngModel)]=\\\"resumo\\\" rows=\\\"4\\\" style=\\\"--padding-start: 0; --padding-end: 0\\\" placeholder=\\\"Resumo da consulta...\\\"></ion-textarea>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col class=\\\"item-form\\\" size=\\\"12\\\">\\n          <ion-textarea [(ngModel)]=\\\"observacoes\\\" rows=\\\"4\\\" style=\\\"--padding-start: 0; --padding-end: 0\\\" placeholder=\\\"Escreva as suas observações...\\\"></ion-textarea>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col class=\\\"item-form-center\\\" size=\\\"12\\\">\\n          <ion-button (click)=\\\"salvarConsulta()\\\" color=\\\"primary\\\" expand=\\\"block\\\">Salvar Consulta</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}